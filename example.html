<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title> GeoMap.js </title>
		<meta name="description" content="XXX" />
		<meta name="keywords" content="k1,k2" />
		<meta name="author" content="Tim Yang" />
		<script type="text/javascript" src="../jslib/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" src="../raphael/raphael-min.js"></script>
		<script type="text/javascript" src="geomap.js"></script>
	</head>
	<body style="background:#E4E6E1;">
		<div id="map" style="width:1000px;height:500px;margin:0 auto;"></div>
		<div style="width:1000px;height:500px;overflow:hidden;">
			<div id="chinamap" style="width:500px;height:500px;"></div>
			<div id="citymap" style="width:400px;height:500px;margin:-500px 0 0 600px"></div>
		</div>


		<div id="tooltip" style="position:absolute;padding:10px;background:#fff;border:5px solid #708090;display:none;">
		</div>
		
		<script>
			// 部分城市的坐标
			var aCitys = {
				la:{y:34.0396,x:-118.2661},
				toronto:{y:43.6667,x:-79.4167},
				ottawa:{y:45.4167,x:-75.7000},
				ny:{y:40.71435280,x:-74.00597309999999},
				mxgc:{y : 19.43260770,x : -99.1332080},
				bynsals:{y : -34.60372320,x : -58.38159310},
				brasilia:{y:-16.2119,x:-44.4308},
				riodeJaneiro:{y : -22.90353930,x : -43.20958690},
				madrid:{y:40.4086,x:-3.6922},
				london:{y:51.5142,x:-0.0931},
				amsterdam:{y:52.3500,x:4.9167},
				paris:{y:48.8667,x:2.3333},
				rome:{y:44.4833,x:11.3333},
				Jerusalem:{y:31.7800,x:35.2300},
				moscow:{y:55.7522,x:37.6156},	
				bj:{y:39.90,x:116.42},
				tokyo:{y:35.6850,x:139.7514},
				sh:{y:31.14,x:121.29},
				hk:{y:22.39,x:114.1},
				taibei:{y:25.03,x:121.30},
				sydney:{y:-33.86748690,x:151.20699020}
			};
			
			// 创建地图画布
			$.ajax({
				url: 'json/world.geo.json',
				dataType: 'json'
			}).done(function(data){
						var map = new GeoMap({
									container:'#map',
									scale: {
										x: 2.5,
										y: 3
									}
								}),
								tooltip = $('#tooltip');
						map.load(data);
						map.render();
						map.shapes.hover(function(e){
							var self = this;
							self.animate({
								fill: '#369'
							},100);
						},function(){
							this.animate({
								fill: '#fff'
							},100)
						}).mousemove(function(e){
									var self = this;
									tooltip.html(self.data('properties').name).css({
										"top":e.clientY + 20,
										"left":e.clientX + 20
									}).show();
								}).mouseout(function(){
									tooltip.empty().hide();
								});
					});

			$.ajax({
				url: 'json/0.json',
				dataType: 'json'
			}).done(function(data){
						console.log(data);
				var map = new GeoMap({
					container:'#chinamap',
					scale: {
						x: 8,
						y: 11
					}
				}),
				tooltip = $('#tooltip');
				map.load(data);
				map.render();
				map.shapes.hover(function(e){
					var self = this;
					self.animate({
						fill: '#369'
					},100);
				},function(){
					this.animate({
						fill: '#fff'
					},100)
				}).mousemove(function(e){
					var self = this;
					tooltip.html(self.data('properties').name).css({
						"top":$(window).scrollTop() + e.clientY + 20,
						"left":$(window).scrollLeft() + e.clientX + 20
					}).show();
				}).mouseout(function(){
					tooltip.empty().hide();
				});
			});
			/*
			$.ajax({
				url: 'json/11.json',
				dataType: 'json'
			}).done(function(data){
						var map = new GeoMap({
									container:'#citymap',
									scale: {
										x: 160,
										y: 220
									}
								}),
								tooltip = $('#tooltip');
						map.load(data);
						map.render();
						map.shapes.hover(function(e){
							var self = this;
							self.animate({
								fill: '#369'
							},100);
						},function(){
							this.animate({
								fill: '#fff'
							},100)
						}).mousemove(function(e){
									var self = this;
									tooltip.html(self.data('properties').name).css({
										"top":$(window).scrollTop() + e.clientY + 20,
										"left":$(window).scrollLeft() + e.clientX + 20
									}).show();
								}).mouseout(function(){
									tooltip.empty().hide();
								});
					});
				*/
		</script>
	</body>
</html>

